<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Booking Page | Gor Sinta</title>
    <link href="./static/src/output.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src='https://cdn.jsdelivr.net/npm/fullcalendar/index.global.min.js'></script>
    <style>
        /* Add your custom styles here if needed */
        #calendar-container {
          width: 100%;
          margin: auto;
        }
        
        #calendar-container {
          max-width: 350px; 
          padding: 0 20px !important;
        }
      
        .fc-toolbar-title {
          font-size: 14px !important; 
        }

        .fc-view-harness {
          margin-bottom: 20px !important; 
        }
      
        .date-button {
          width: 100%;
          margin-top: 10px; 
          font-size: 12px; 
          padding: 5px; 
        }
      
        /* Menyesuaikan ukuran tulisan "Today" */
        .fc-today-button {
          font-size: 12px !important; 
        }
      
        /* Menyesuaikan ukuran tombol "Next" dan "Previous" */
        .fc-prev-button,
        .fc-next-button {
          font-size: 12px !important; 
        }
      
        /* Gaya untuk menyesuaikan ukuran kalender */
        .fc-daygrid-day {
          font-size: 12px; 
          padding: 5px; 
        }

        /* Gaya untuk tombol "Book Now" */
        .date-button {
          width: 100%;
          margin-top: 10px; 
          font-size: 12px; 
          padding: 5px; 
        }

        /* Add your custom styles here if needed */
        .time-grid {
          display: grid;
          grid-template-columns: repeat(3, 1fr); 
          gap: 1rem; 
        }

        /* Style untuk kontainer tombol */
        #button-container {
          border: 1px solid #ccc; 
          border-radius: 5px; 
          padding: 10px; 
          margin-top: 20px; 
          display: grid; 
          justify-items: center; 
        }

        /* Style untuk judul */
        #button-container h2 {
          text-align: center; 
          margin-bottom: 10px; 
          color: black; 
          font-size: 18px; 
          position: relative; 
          display: inline-block; 
        }

        /* Style untuk garis bawah */
        #button-container h2::after {
          content: '';
          display: block;
          width: 50px; 
          height: 2px; 
          background-color: black; 
          position: absolute; 
          bottom: -10px; 
          left: 50%; 
          transform: translateX(-50%); 
        }

        /* Style untuk tombol */
        .date-button {
          background-color: #4a90e2;
          color: #fff; 
          border: none; 
          border-radius: 5px; 
          padding: 10px; 
          text-align: center; 
          cursor: pointer; 
          transition: background-color 0.3s; 
        }

        /* Hover state untuk tombol */
        .date-button:hover {
          background-color: #357ae8; 
        }

        /* Style untuk hari */
        .selected-day {
          font-size: 16px;
          font-weight: bold;
          margin-bottom: 5px;
        }

        /* Style untuk tanggal */
        .selected-date {
          font-size: 16px;
          margin-bottom: 5px;
        }
    </style>
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        const calendarEl = document.getElementById('calendar');
        const calendar = new FullCalendar.Calendar(calendarEl, {
            initialView: 'dayGridMonth',
            selectable: true,
            dateClick: function(info) {
                // Remove any existing buttons
                $('.date-button').remove();
                // Create new buttons beside clicked date
                const availableTimes = getAvailableTimes();
                availableTimes.forEach(time => {
                    $('<button class="date-button">' + time + '</button>')
                        .appendTo($('.time-grid')); // Append to time-grid container
                });
                // Set the selected date and day in variables
                const selectedDate = info.date.toLocaleDateString('en-GB', { day: '2-digit', month: '2-digit', year: 'numeric' }); // Format: DD/MM/YYYY
                const selectedDay = info.date.toLocaleDateString('en-GB', { weekday: 'long' }); // Get the day
                // Display selected day and date together
                $('#selected-date').text(selectedDay + ', ' + selectedDate);

            }
        });
        calendar.render();
    
        // Function to get available times from 10am to 1am
        function getAvailableTimes() {
            const times = [];
            for (let i = 10; i <= 24; i++) {
                const hour = i < 13 ? i : i - 12; // Convert to 12-hour format
                const ampm = i < 12 ? "AM" : "PM"; // Determine AM or PM
                const timeString = hour + ":00 " + ampm;
                times.push(timeString);
            }
            return times;
        }
    
        // Add event listener to date buttons for redirection
        $(document).on('click', '.date-button', function() {
            // Get the selected time from the button text
            const selectedSport = "lapangan futsal"; // Menyimpan jenis lapangan
            const selectedCourt = "lapangan 1"; // Menyimpan nomor lapangan
            const selectedPrice = "Rp. 100.000"; // Menyimpan harga
    
            const selectedTime = $(this).text();
            // Redirect to the confirmation booking page passing selected date and time as parameters
            window.location.href = '/confirmationBooking?day=' +'&date=' + $('#selected-date').text() + '&time=' + selectedTime + '&sport=' + selectedSport + '&court=' + selectedCourt + '&price=' + selectedPrice;
        });
    });    
    </script>
</head>
<body class="bg-gray-100">
  <!-- navbar start -->
  {% include "headerBooking.html" %}
  <!-- navbar end  -->

  <!-- hero section start -->
  <div id='calendar-container' class="container mx-auto px-8 py-12 md:px-16 lg:px-40 xl:px-64">
      <div id='calendar'></div>
      <div id='button-container'>
        <h2>Waktu Tersedia</h2> <!-- Judul -->
        <div class="selected-date" id="selected-date"></div> <!-- Hari dan Tanggal -->
        <div class="time-grid"></div> <!-- Tombol-tombol waktu -->
    </div>
  </div>
    <!-- hero section end -->

</body>
</html>
